<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>QUnit Test Groups</title>
	<link rel="stylesheet" href="../qunit/qunit.css">
</head>
<body>
	<div id="qunit"></div>
	<script src="../qunit/qunit.js"></script>
	<script src="../src/qunit-testgroups.js"></script>
	<script>
		module("ScriptLoader");
		
		test("ScriptLoader.createScriptElement()", 2, function() {
			var url = "file:///url";
			var result = ScriptLoader.createScriptElement(url);
			
			equal(result.constructor, HTMLScriptElement);
			equal(result.src, url);
		});
		
		asyncTest("ScriptLoader.load()", 1, function() {
			var url = "ScriptLoader_load-test.js";
			ScriptLoader.load(url);
			
			var check = function() {
				strictEqual(window.ScriptLoader_load_test_LOADED, true);
				start();
			};
			setTimeout(check, 100);
		});
		
		
		module("TestFile");
		
		test("TestFile()", 2, function() {
			var name = "name";
			var url = "url";
			var testFile = new TestFile(name, url);
			equal(testFile.name, name);
			equal(testFile.url, url);
		});
		
		test("TestFile(): invalid name type", 1, function() {
			var name = 7;
			var url = "url";
			var func = function() {
				new TestFile(name, url);
			};
			throws(func, TypeError);
		});
		
		test("TestFile(): invalid url type", 1, function() {
			var name = "name";
			var url = 7;
			var func = function() {
				new TestFile(name, url);
			};
			throws(func, TypeError);
		});
		
		
		module("TestFilesList");
		
		test("TestFilesList()", 1, function() {
			var testFilesList = new TestFilesList();
			equal(testFilesList.length, 0);
		});
		
		test("TestFilesList.add(): new", 6, function() {
			var testFilesList = new TestFilesList();
			
			var testFile0 = new TestFile("name0", "url0");
			var result = testFilesList.add(testFile0);
			equal(result, true);
			equal(testFilesList.length, 1);
			deepEqual(testFilesList.get(0), testFile0);
			
			var testFile1 = new TestFile("name1", "url1");
			result = testFilesList.add(testFile1);
			equal(result, true);
			equal(testFilesList.length, 2);
			deepEqual(testFilesList.get(1), testFile1);
		});
		
		test("TestFilesList.add(): repeated URL", 6, function() {
			var testFilesList = new TestFilesList();
			var sameUrl = "same-url";
			
			var testFile0 = new TestFile("name0", sameUrl);
			var result = testFilesList.add(testFile0);
			equal(result, true);
			equal(testFilesList.length, 1);
			deepEqual(testFilesList.get(0), testFile0);
			
			var testFile1 = new TestFile("name1", sameUrl);
			result = testFilesList.add(testFile1);
			equal(result, false);
			equal(testFilesList.length, 1);
			deepEqual(testFilesList.get(0), testFile0);
		});
		
		
		module("TestGroup");
		
		test("TestGroup()", 1, function() {
			ok(false, "Implement!");
		});
		
		test("TestGroup.isTestFile()", 1, function() {
			ok(false, "Implement!");
		});
		
		test("TestGroup.isTestGroup()", 1, function() {
			ok(false, "Implement!");
		});
		
		test("TestGroup.getAllTestFiles()", 1, function() {
			ok(false, "Implement!");
		});
		
		test("TestGroup.run()", 1, function() {
			ok(false, "Implement!");
		});
	</script>
</body>
